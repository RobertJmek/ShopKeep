@{
    ViewData["Title"] = "Acasă";

    var isStaff = User?.Identity?.IsAuthenticated == true && (User.IsInRole("Admin") || User.IsInRole("Editor"));
}

<!-- Hero Section -->
<div class="container my-5">
    <div class="text-center mb-5" style="padding: 4rem 0;">
        <div class="d-flex justify-content-center mb-4">
            <img src="~/images/logo.svg" alt="ShopKeep" style="height: 100px;">
        </div>
        <p class="lead text-muted mb-5 mx-auto" style="max-width: 600px;">
            Descoperă produse de calitate la prețuri competitive
        </p>
        <div class="d-flex gap-3 justify-content-center">
            <a asp-controller="Product" asp-action="Index" class="btn btn-dark btn-lg px-4 rounded-pill">
                Explorează Produsele
            </a>
            <a asp-controller="Category" asp-action="Index" class="btn btn-outline-dark btn-lg px-4 rounded-pill">
                Vezi Categorii
            </a>
        </div>
    </div>
</div>

<!-- Statistics - Simplified -->
<div class="container mb-5">
    <div class="row g-3 text-center">
        <div class="col-6 col-md-3">
            <h3 class="fw-bold mb-0">@ViewBag.TotalProducts</h3>
            <small class="text-muted">Produse</small>
        </div>
        <div class="col-6 col-md-3">
            <h3 class="fw-bold mb-0">@ViewBag.TotalCategories</h3>
            <small class="text-muted">Categorii</small>
        </div>
        <div class="col-6 col-md-3">
            <h3 class="fw-bold mb-0">@ViewBag.TotalOrders</h3>
            <small class="text-muted">Comenzi</small>
        </div>
        <div class="col-6 col-md-3">
            <h3 class="fw-bold mb-0">@ViewBag.TotalUsers</h3>
            <small class="text-muted">Clienți</small>
        </div>
    </div>
</div>

<hr class="my-5" style="opacity: 0.1;">

<!-- Recent Categories Section -->
@if (ViewBag.RecentCategories != null && ((List<ShopKeep.Models.Category>)ViewBag.RecentCategories).Any())
{
    <div class="container mb-5">
        <div class="text-center mb-4">
            <h2 class="fw-bold mb-2">Categorii Populare</h2>
            <p class="text-muted">Explorează produsele după categorie</p>
        </div>
        
        <div class="row g-3 mb-3">
            @foreach (var category in ViewBag.RecentCategories)
            {
                <div class="col-md-6 col-lg-3">
                    <a asp-controller="Product" asp-action="Index" asp-route-categoryId="@category.Id" 
                       class="text-decoration-none">
                        <div class="card border h-100 hover-card">
                            <div class="card-body text-center py-4">
                                <h5 class="mb-2">@category.Name</h5>
                                <small class="text-muted">@(category.Products?.Count ?? 0) produse</small>
                            </div>
                        </div>
                    </a>
                </div>
            }
        </div>
        
        <div class="text-center">
            <a asp-controller="Category" asp-action="Index" class="btn btn-outline-dark rounded-pill">
                Vezi toate categoriile
            </a>
        </div>
    </div>
    
    <hr class="my-5" style="opacity: 0.1;">
}

<!-- Featured Products Section -->
@if (ViewBag.FeaturedProducts != null && ((List<ShopKeep.Models.Product>)ViewBag.FeaturedProducts).Any())
{
    <div class="container mb-5">
        <div class="text-center mb-4">
            <h2 class="fw-bold mb-2">Produse Noi</h2>
            <p class="text-muted">Descoperă ultimele adăugări</p>
        </div>
        
        <div class="row g-4 mb-4">
            @foreach (var product in ViewBag.FeaturedProducts)
            {
                <div class="col-md-6 col-lg-4">
                    <a asp-controller="Product" asp-action="Show" asp-route-id="@product.Id" 
                       class="text-decoration-none">
                        <div class="card border-0 h-100 hover-card">
                            <img src="@product.ImageUrl" class="card-img-top" alt="@product.Title" 
                                 style="height: 280px; object-fit: cover;">
                            <div class="card-body">
                                <h5 class="card-title text-truncate mb-3">@product.Title</h5>
                                <div class="d-flex justify-content-between align-items-center">
                                    <span class="h5 mb-0">@product.Price.ToString("C2")</span>
                                    @if (product.Stock > 0)
                                    {
                                        <small class="text-success">În stoc</small>
                                    }
                                    else
                                    {
                                        <small class="text-danger">Stoc epuizat</small>
                                    }
                                </div>
                            </div>
                        </div>
                    </a>
                </div>
            }
        </div>
        
        <div class="text-center">
            <a asp-controller="Product" asp-action="Index" class="btn btn-dark rounded-pill px-4">
                Vezi toate produsele
            </a>
        </div>
    </div>
}

<!-- Add Bootstrap Icons and custom styles -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">

<style>
    .hover-card {
        transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    
    .hover-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
    }
</style>
